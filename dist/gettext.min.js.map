{"version":3,"sources":["/source/gettext.js","gettext.js"],"names":["_typeof","obj","Symbol","constructor","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Gettext","catalog","this","undefined","plural","hasOwnProperty","pluralidx","n","eval","value","msgid","singular","count","type","load","locale_path","locale","domain","endsWith","substr","Promise","resolve","reject","xhr","XMLHttpRequest","addEventListener","JSON","parse","response","statusText","open","send"],"mappings":"AACA,YCIA,SAASA,SAAQC,GAAO,MAAOA,IAAyB,mBAAXC,SAA0BD,EAAIE,cAAgBD,OAAS,eAAkBD,GAEtH,QAASG,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJhH,GAAIC,cAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MDA3hBkB,QAAO,WACT,QADEA,SACUC,SCORrB,gBAAgBsB,KDRlBF,SAEkBG,SAAZF,UACAA,SACIA,WACAG,OAAU,OAGbH,QAAQI,eAAe,aACxBJ,QAAQA,YAEZC,KAAKD,QAAUA,QAAQA,QACnBA,QAAQG,OACRF,KAAKI,UAAY,SAACC,GACd,MAAgC,GAAzBC,KAAMP,QAAQG,SAGzBF,KAAKI,UAAY,SAACC,GACd,MAAc,KAAPA,EAAY,EAAI,GCsCnC,MAzBAvB,cD/BEgB,UCgCEJ,IAAK,UACLa,MAAO,SDVHC,GACJ,GAAID,GAAQP,KAAKD,QAAQS,EACzB,OAAsB,mBAAXD,GACAC,EAEmB,gBAAXD,GAAuBA,EAAQA,EAAM,MCcxDb,IAAK,WACLa,MAAO,SDXFE,EAAUP,EAAQQ,GACvB,GAAIH,GAAQP,KAAKD,QAAQU,GACrBE,EAAmB,mBAALJ,GAAK,YAAAjC,QAALiC,EAClB,OAAa,cAATI,GACQF,EAAUP,GAAQF,KAAKI,UAAUM,IACzB,WAATC,EACAJ,EAEAA,EAAMP,KAAKI,UAAUM,QAxClCZ,UA6CNA,SAAQc,KAAO,SAAUC,EAAaC,EAAQC,GAI1C,MAHIF,GAAYG,SAAS,OACrBH,EAAcA,EAAYI,OAAO,EAAGJ,EAAY1B,OAAS,IAEtD,GAAI+B,SAAQ,SAACC,EAASC,GACzB,GAAIC,GAAM,GAAIC,eACdD,GAAIE,iBAAiB,OAAQ,WACzBJ,EAAQ,GAAIrB,SAAQ0B,KAAKC,MAAMJ,EAAIK,cAEvCL,EAAIE,iBAAiB,QAAS,WAC1BH,EAAOC,EAAIM,cAEfN,EAAIO,KAAK,MAAUf,EAAW,IAAIC,EAAM,gBAAgBC,EAAM,YAC9DM,EAAIQ","file":"gettext.min.js","sourcesContent":["/*jshint strict:true, latedef:true, noempty:true, noarg:true, unused:vars, evil:true, esnext:true, indent:4, eqeqeq:true, nocomma:true, quotmark:single, nonbsp:true, browser:true, bitwise:true, curly:true, undef:true, globalstrict:true, nonew:true, forin:true */\n'use strict';\n\nclass Gettext {\n    constructor(catalog) {\n        if (catalog === undefined) {\n            catalog = {\n                'catalog': {},\n                'plural': null\n            };\n        }\n        if (!catalog.hasOwnProperty('catalog')) {\n            catalog.catalog = {};\n        }\n        this.catalog = catalog.catalog;\n        if (catalog.plural) {\n            this.pluralidx = (n) => {\n                return (eval(catalog.plural)) * 1;\n            };\n        } else {\n            this.pluralidx = (n) => {\n                return (n === 1) ? 0 : 1;\n            };\n        }\n    }\n\n    gettext(msgid) {\n        let value = this.catalog[msgid];\n        if (typeof(value) === 'undefined') {\n            return msgid;\n        } else {\n            return (typeof(value) === 'string') ? value : value[0];\n        }\n    }\n\n    ngettext(singular, plural, count) {\n        let value = this.catalog[singular];\n        let type = typeof(value);\n        if (type === 'undefined') {\n            return [singular, plural][this.pluralidx(count)];\n        } else if (type === 'string') {\n            return value;\n        } else {\n            return value[this.pluralidx(count)];\n        }\n    }\n}\n\nGettext.load = function (locale_path, locale, domain) {\n    if (locale_path.endsWith('/')) {\n        locale_path = locale_path.substr(0, locale_path.length - 1);\n    }\n    return new Promise((resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', () => {\n            resolve(new Gettext(JSON.parse(xhr.response)));\n        });\n        xhr.addEventListener('error', () => {\n            reject(xhr.statusText);\n        });\n        xhr.open('GET', `${locale_path}/${locale}/LC_MESSAGES/${domain}.mo.json`);\n        xhr.send();\n    });\n};\n","/*jshint strict:true, latedef:true, noempty:true, noarg:true, unused:vars, evil:true, esnext:true, indent:4, eqeqeq:true, nocomma:true, quotmark:single, nonbsp:true, browser:true, bitwise:true, curly:true, undef:true, globalstrict:true, nonew:true, forin:true */\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Gettext = (function () {\n    function Gettext(catalog) {\n        _classCallCheck(this, Gettext);\n\n        if (catalog === undefined) {\n            catalog = {\n                'catalog': {},\n                'plural': null\n            };\n        }\n        if (!catalog.hasOwnProperty('catalog')) {\n            catalog.catalog = {};\n        }\n        this.catalog = catalog.catalog;\n        if (catalog.plural) {\n            this.pluralidx = function (n) {\n                return eval(catalog.plural) * 1;\n            };\n        } else {\n            this.pluralidx = function (n) {\n                return n === 1 ? 0 : 1;\n            };\n        }\n    }\n\n    _createClass(Gettext, [{\n        key: 'gettext',\n        value: function gettext(msgid) {\n            var value = this.catalog[msgid];\n            if (typeof value === 'undefined') {\n                return msgid;\n            } else {\n                return typeof value === 'string' ? value : value[0];\n            }\n        }\n    }, {\n        key: 'ngettext',\n        value: function ngettext(singular, plural, count) {\n            var value = this.catalog[singular];\n            var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n            if (type === 'undefined') {\n                return [singular, plural][this.pluralidx(count)];\n            } else if (type === 'string') {\n                return value;\n            } else {\n                return value[this.pluralidx(count)];\n            }\n        }\n    }]);\n\n    return Gettext;\n})();\n\nGettext.load = function (locale_path, locale, domain) {\n    if (locale_path.endsWith('/')) {\n        locale_path = locale_path.substr(0, locale_path.length - 1);\n    }\n    return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', function () {\n            resolve(new Gettext(JSON.parse(xhr.response)));\n        });\n        xhr.addEventListener('error', function () {\n            reject(xhr.statusText);\n        });\n        xhr.open('GET', locale_path + '/' + locale + '/LC_MESSAGES/' + domain + '.mo.json');\n        xhr.send();\n    });\n};\n//# sourceMappingURL=data:application/json;base64,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QyxrQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUMxQixDQUFDLENBQUM7QUFDSCxXQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBSyxXQUFXLFNBQUksTUFBTSxxQkFBZ0IsTUFBTSxjQUFXLENBQUM7QUFDMUUsV0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0tBQ2QsQ0FBQyxDQUFDO0NBQ04sQ0FBQyIsImZpbGUiOiJnZXR0ZXh0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypqc2hpbnQgc3RyaWN0OnRydWUsIGxhdGVkZWY6dHJ1ZSwgbm9lbXB0eTp0cnVlLCBub2FyZzp0cnVlLCB1bnVzZWQ6dmFycywgZXZpbDp0cnVlLCBlc25leHQ6dHJ1ZSwgaW5kZW50OjQsIGVxZXFlcTp0cnVlLCBub2NvbW1hOnRydWUsIHF1b3RtYXJrOnNpbmdsZSwgbm9uYnNwOnRydWUsIGJyb3dzZXI6dHJ1ZSwgYml0d2lzZTp0cnVlLCBjdXJseTp0cnVlLCB1bmRlZjp0cnVlLCBnbG9iYWxzdHJpY3Q6dHJ1ZSwgbm9uZXc6dHJ1ZSwgZm9yaW46dHJ1ZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBHZXR0ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihjYXRhbG9nKSB7XG4gICAgICAgIGlmIChjYXRhbG9nID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhdGFsb2cgPSB7XG4gICAgICAgICAgICAgICAgJ2NhdGFsb2cnOiB7fSxcbiAgICAgICAgICAgICAgICAncGx1cmFsJzogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhdGFsb2cuaGFzT3duUHJvcGVydHkoJ2NhdGFsb2cnKSkge1xuICAgICAgICAgICAgY2F0YWxvZy5jYXRhbG9nID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYXRhbG9nID0gY2F0YWxvZy5jYXRhbG9nO1xuICAgICAgICBpZiAoY2F0YWxvZy5wbHVyYWwpIHtcbiAgICAgICAgICAgIHRoaXMucGx1cmFsaWR4ID0gKG4pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGV2YWwoY2F0YWxvZy5wbHVyYWwpKSAqIDE7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wbHVyYWxpZHggPSAobikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAobiA9PT0gMSkgPyAwIDogMTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXR0ZXh0KG1zZ2lkKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuY2F0YWxvZ1ttc2dpZF07XG4gICAgICAgIGlmICh0eXBlb2YodmFsdWUpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIG1zZ2lkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YodmFsdWUpID09PSAnc3RyaW5nJykgPyB2YWx1ZSA6IHZhbHVlWzBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdldHRleHQoc2luZ3VsYXIsIHBsdXJhbCwgY291bnQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5jYXRhbG9nW3Npbmd1bGFyXTtcbiAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YodmFsdWUpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBbc2luZ3VsYXIsIHBsdXJhbF1bdGhpcy5wbHVyYWxpZHgoY291bnQpXTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlW3RoaXMucGx1cmFsaWR4KGNvdW50KV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkdldHRleHQubG9hZCA9IGZ1bmN0aW9uIChsb2NhbGVfcGF0aCwgbG9jYWxlLCBkb21haW4pIHtcbiAgICBpZiAobG9jYWxlX3BhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgICAgICBsb2NhbGVfcGF0aCA9IGxvY2FsZV9wYXRoLnN1YnN0cigwLCBsb2NhbGVfcGF0aC5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUobmV3IEdldHRleHQoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIGAke2xvY2FsZV9wYXRofS8ke2xvY2FsZX0vTENfTUVTU0FHRVMvJHtkb21haW59Lm1vLmpzb25gKTtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICB9KTtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n"],"sourceRoot":"/source/"}